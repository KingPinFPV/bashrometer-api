# test2
בשרומטר 1.0

סיכום פרויקט "בשרומטר 1.0" (נכון ל-23 במאי 2025)
שם הפרויקט והחזון:

שם הפרויקט: "בשרומטר 1.0" (Bashrometer 1.0).
הרעיון המקורי: פלטפורמת SaaS לשיתוף (crowdsourcing) והשוואת מחירי בשר בין קמעונאים שונים.
מטרה עסקית מרכזית: להעצים צרכנים עם שקיפות מחירים ולאפשר להם לחסוך כסף ברכישת בשר, תוך יצירת קהילה שמאמתת ומעדכנת דיווחי מחירים.
יעדים מרכזיים (High-Level Objectives):

תכונות ליבה שהוגדרו:
דיווח מחירים מבוסס קהל (crowdsourced reporting).
אימות דיווחי משתמשים באמצעות "לייקים" מהקהילה.
נרמול מחירים (לדוגמה, מחיר ל-100 גרם או ליחידת מידה סטנדרטית אחרת).
הצגת מגמות היסטוריות וניתוח נתונים (אנליטיקס).
ממשק ניהול (Admin UI) ו-API לניהול מוצרים, קמעונאים ודיווחים.
ערך למשתמשי קצה: שקיפות מחירים, יכולת השוואה, חיסכון כספי, קבלת החלטות רכישה מושכלות יותר.
ערך לארגונים/לפלטפורמה: יצירת מאגר נתונים עדכני על מחירי בשר, פוטנציאל לניתוח מגמות שוק, משיכת קהל משתמשים נאמן.
ארכיטקטורת Backend (bashrometer-api):

טכנולוגיות: Node.js עם Express.js, בסיס נתונים PostgreSQL (בפלטפורמת Neon).
מבנה תיקיות עיקרי: controllers/, routes/, middleware/, utils/, config/ (עבור db.js).
אימות והרשאות (Authentication & Authorization):
JWT (JSON Web Tokens) לאימות משתמשים.
authMiddleware.js: מכיל פונקציה לאימות הטוקן (למשל, authenticateToken) ופונקציה לבדיקת הרשאות תפקיד (authorizeRole).
דגשים נוספים:
CORS: הגדרות CORS מפורטות בקובץ app.js (corsOptions) לניהול גישה מדומיינים שונים, כולל תמיכה ב-credentials.
Error Handler: קיים Global Error Handler ב-app.js (או ב-middleware/errorHandler.js) שמטרתו לתפוס שגיאות ולהחזיר תגובות JSON עקביות.
Utils: קובץ utils/priceCalculator.js מכיל פונקציית עזר calcPricePer100g.
תיעוד וסכמה:
openapi.yaml: קיים קובץ לתיעוד ה-API בפורמט OpenAPI.
schema.sql: מכיל את פקודות ה-SQL ליצירת הטבלאות והמבנה של בסיס הנתונים, כולל טבלאות users, products, retailers, prices, ו-price_report_likes.
ארכיטקטורת Frontend (bashrometer-ui):

טכנולוגיות: Next.js (עם App Router), TypeScript, Tailwind CSS. האפליקציה תומכת ב-RTL (מימין לשמאל) עבור עברית.
מבנה תיקיות עיקרי: src/app/ (עבור נתיבים ודפים), src/components/, src/contexts/ (כולל AuthContext.tsx לניהול אימות גלובלי), src/lib/ (אמור להכיל apiClient.ts או דומה לו).
זרמי משתמש ממומשים/מתוכננים:
רישום והתחברות משתמשים (/register, /login), שמירת JWT ב-localStorage.
הצגת רשימת מוצרים (/products).
הצגת דף פרטי מוצר (/products/[productId])./page.tsx]
פונקציונליות Like/Unlike (שולבה בדף פרטי מוצר)./page.tsx]
טופס דיווח מחיר (/report-price).
תכונות שעדיין בפיתוח או חסרות בצד ה-Frontend:
ממשק אדמין (Admin UI) – התחלנו ליצור את התשתית לו (/admin).
בדיקות אוטומטיות ל-Frontend.
תהליכי CI/CD.
תכונות ממומשות עד כה:

Backend:
אימות משתמשים (רישום, התחברות) עם JWT.
נתיבי API בסיסיים (CRUD חלקי) עבור users (דרך auth), products (בעיקר GET), retailers (בעיקר GET), ו-prices (כולל יצירת דיווח ופונקציונליות Like/Unlike).
מנגנון Like/Unlike עם טבלת price_report_likes. בעיות CORS וניתוב ראשוניות בנתיב הלייק נפתרו.
מנגנון הרשאות בסיסי (למשל, authorizeRole) מוכן לשימוש.
תיקוני טיפול בשגיאות ב-controllers כדי להשתמש ב-next(err).
הפרדה בין הגדרת ה-app להפעלת השרת (server.js).
Frontend:
טפסי הרשמה והתחברות משתמשים.
AuthContext לניהול מצב המשתמש והטוקן.
הצגת רשימת מוצרים ודף פרטי מוצר./page.tsx]
שילוב פונקציונליות Like/Unlike בדף פרטי המוצר, כולל עדכון UI./page.tsx]
טופס דיווח מחיר בסיסי.
תשתית ראשונית לממשק אדמין (/admin) עם הגנת נתיב לפי תפקיד.
דף אדמין ראשוני להצגת רשימת מוצרים (קריאה בלבד).
בדיקות:
תשתית בדיקות API עם Jest ו-Supertest הוקמה.
נכתבו ועוברות בדיקות עבור נתיבי Auth (auth.test.js), Prices (כולל Like/Unlike ב-prices.test.js), ו-Products (נתיבי GET ב-products.test.js).
סטטוס נוכחי וחוסמים (שהיו וטופלו או שעדיין קיימים):

בעיות שנפתרו:
בעיות CORS ו-Preflight עבור נתיב ה-like (POST /api/prices/:id/like) נפתרו.
שגיאות 404 ו-500 שונות בנתיבי ה-API טופלו באמצעות תיקוני ניתוב, טיפול בשגיאות ב-controllers (שימוש ב-next(err)), ותיקוני SQL (כמו יצירת טבלת price_report_likes).
בעיות בהרצת בדיקות ה-API הראשוניות (כמו EADDRINUSE, app.address is not a function, Cannot find module) נפתרו.
חסמים נוכחיים או פריטים שעדיין לא מומשו במלואם:
ממשק אדמין: רק התשתית הבסיסית קיימת (הגנת נתיב, דף ראשי, דף רשימת מוצרים לקריאה). פונקציונליות CRUD מלאה טרם מומשה ב-UI.
API ל-CRUD אדמיניסטרטיבי: פונקציות Controller ונתיבים ל-CRUD מלא (יצירה, עדכון, מחיקה עם הרשאות אדמין) עבור products מומשו. עבור retailers וניהול prices (מעבר ללייק, למשל שינוי סטטוס) טרם מומשו או הורחבו באופן מלא.
בדיקות API: כיסוי הבדיקות ל-retailers עדיין בסיסי. יש להרחיב את כיסוי הבדיקות לכל מקרי הקצה והפילטרים המורכבים.
אין בדיקות אוטומטיות ל-Frontend.
אין תהליכי CI/CD.
Logging Framework: אין עדיין framework מתקדם לניהול לוגים (מעבר ל-console.log/error).
Containerization: אין עדיין Dockerfile או docker-compose.yml.
לוקליזציה (i18n): לא ממומש באופן מובנה, למרות שה-UI בעברית.
הצעדים הבאים ומפת הדרכים (כפי שדנו):

בטווח המיידי:
השלמת בדיקות API בסיסיות (למשל, עבור retailers).
מימוש CRUD מלא (API ובדיקות) עבור products. (זה מה שעשינו לאחרונה)
התחלת בניית ממשק אדמין עם יכולות CRUD עבור products. (זה השלב הבא המתוכנן)
בהמשך:
השלמת ממשק האדמין עבור retailers וניהול price reports.
הטמעת בדיקות אוטומטיות נוספות (יחידה, E2E ל-UI).
הקמת תהליכי CI/CD (למשל, עם GitHub Actions).
שיפורי UX ב-Frontend (פילטרים, עימוד מתקדם, מיון ברשימות הציבוריות).
שיקולי DevOps: Docker, ניהול סודות, ניהול לוגים מתקדם.
פיתוח תכונות אנליטיקס ומגמות היסטוריות.
בדיקות ביצועים ואופטימיזציה.
השלמת תיעוד.
סיכום זה אמור לתת תמונה טובה של הפרויקט. אם יש משהו שפספסתי או שתרצה לדייק, אנא עדכן אותי.